= add_row(image_tag('warning-icon.png', :size => "37x27"), document.get("database_restrictions_display"))
= add_row('Alert', document.get("database_alert"))
= add_row('Subtitle', document.get("subtitle_display"),:abbreviate => 100)
= add_row('Author', document.get("author_display"))
= add_row('Published', document.get("full_publisher_display"))
= add_row('Summary', document.get("database_summary_display"), :expand_to => document.get('summary_display'))
- unless (urls =  online_link_hash(document)).empty?
  - non_circ = image_tag("icons/noncirc.png", :class => :availability)
  - urls = urls.collect { |link| non_circ + link_to(link.first.abbreviate(60), link.last) }
  - urls = urls.first if controller.controller_name == "search"
  = add_row('Online', urls)


- unless (locations = document["location_display"].listify.reject { |l| l == "Online" }).empty? || document["location_holdings_id_display"].nil?
  .row
    .label Location
    .value 
      - locations = locations.first.listify if controller.controller_name == "search"
      - locations.each_with_index do |location, i|
        - holdings_id = "holding_" + (document["location_holdings_id_display"].listify[i] || document["location_holdings_id_display"].first).to_s if document["location_holdings_id_display"]
        %div
          = image_tag("icons/unknown.png", :class => "availability " + holdings_id) + shorten_location(location).strip

