- if controller.controller_name == 'search'
  #aggregate_search
    = form_tag search_index_path, :method => :get do 
      = hidden_field_tag 'categories[]', 'catalog'
      = hidden_field_tag 'categories[]', 'articles'
      = hidden_field_tag 'categories[]', 'lweb'
      #search_row
        = text_field_tag :q, params[:q], :class => "q" 
        %button{:type => 'submit', :class => 'submit', :name => 'commit', :value => 'Search'} Search
- else
  #articles_search
    = form_tag article_search_path(), :method => :get do
      = hidden_field_tag 'category', params['category'] || 'articles'
      - unless @error

        - @summon.search.query.to_hash.each_pair do |key,value|
          - if value.kind_of?(Array)
            - value.each do |subvalue|
              = hidden_field_tag "#{key}[]", subvalue 
          - else
            = hidden_field_tag key, value

      #search_row
        = text_field_tag 's.q', params['s.q'], :class => "q"
        = submit_tag 'Search', :class => 'submit'
      -##search_categories
        = radio_button_tag "new_search", '', !@new_search 
        Keep search refinements
        = radio_button_tag "new_search", 'true', @new_search 
        New search

